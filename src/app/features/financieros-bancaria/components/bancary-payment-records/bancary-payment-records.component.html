<div class="payment-records-section">
  <div class="section-header">
    <h3>
      <i class="pi pi-list"></i>
      {{ 'registrosPagos' | translate }}
    </h3>
  </div>

  <!-- Search and Filters -->
  <div class="search-filter-container">
    <form [formGroup]="searchForm" class="search-form">
      <div class="search-input-group">
        <i class="pi pi-search"></i>
        <input
          type="text"
          formControlName="search"
          class="search-input"
          [placeholder]="'buscarRegistros' | translate"
        />
      </div>
    </form>

    <div class="filter-tabs">
      <button
        class="tab-btn"
        [class.active]="filterTab === 'todos'"
        (click)="setFilterTab('todos')"
      >
        {{ 'todos' | translate }}
      </button>
      <button
        class="tab-btn"
        [class.active]="filterTab === 'pendientes'"
        (click)="setFilterTab('pendientes')"
      >
        {{ 'pendientes' | translate }}
      </button>
      <button
        class="tab-btn"
        [class.active]="filterTab === 'completados'"
        (click)="setFilterTab('completados')"
      >
        {{ 'pagados' | translate }}
      </button>
    </div>
  </div>

  <!-- Table -->
  <div class="table-container">
    <table class="records-table">
      <thead>
        <tr>
          <th>{{ 'fecha' | translate }}</th>
          <th>{{ 'categoria' | translate }}</th>
          <th>{{ 'servicio' | translate }}</th>
          <th>{{ 'pass' | translate }}</th>
          <th>{{ 'monto' | translate }}</th>
          <th>{{ 'monedaLabel' | translate }}</th>
          <th>{{ 'usuario' | translate }}</th>
          <th>{{ 'estado' | translate }}</th>
          <th>{{ 'verificacion' | translate }}</th>
          <th>{{ 'codigo' | translate }}</th>
          <th>{{ 'acciones' | translate }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let record of displayedRecords" class="record-row">
          <td class="cell-date">{{ record.date }}</td>
          <td class="cell-bank">
            <span class="bank-badge">
              <i [ngClass]="getBankIcon(record.bank)"></i>
              {{ record.bank }}
            </span>
          </td>
          <td class="cell-account-type">{{ record.accountType }}</td>
          <td class="cell-reference">{{ record.reference }}</td>
          <td class="cell-amount">${{ record.amount.toFixed(2) }}</td>
          <td class="cell-currency">{{ record.currency }}</td>
          <td class="cell-user">{{ record.user }}</td>
          <td class="cell-status">
            <span class="status-badge" [ngClass]="getStatusClass(record.status)">
              {{ record.status }}
            </span>
          </td>
          <td class="cell-verification">
            <span class="verification-badge" [ngClass]="record.verification === 'SI' ? 'verified' : 'not-verified'">
              {{ record.verification }}
            </span>
          </td>
          <td class="cell-code">{{ record.code }}</td>
          <td class="cell-actions">
            <div class="action-buttons">
              <button
                type="button"
                class="action-btn view-btn"
                [title]="'ver' | translate"
                (click)="onAction('view', record)"
              >
                <i class="pi pi-eye"></i>
              </button>
              <button
                type="button"
                class="action-btn edit-btn"
                [title]="'editar' | translate"
                (click)="onAction('edit', record)"
              >
                <i class="pi pi-pencil"></i>
              </button>
              <button
                type="button"
                class="action-btn delete-btn"
                [title]="'eliminar' | translate"
                (click)="onAction('delete', record)"
              >
                <i class="pi pi-trash"></i>
              </button>
              <button
                type="button"
                class="action-btn download-btn"
                [title]="'descargar' | translate"
                (click)="onAction('download', record)"
              >
                <i class="pi pi-download"></i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Empty State -->
    <div *ngIf="displayedRecords.length === 0" class="empty-state">
      <i class="pi pi-inbox"></i>
      <p>{{ 'noHayRegistros' | translate }}</p>
    </div>
  </div>
</div>
